#!/bin/bash

echo "remove local artifacts"
rm -rf x/assets

echo "download assets"
rsync -vham \
	--progress \
	--include="*/" \
	--include="*.env" \
	--include="*.json" \
	--include="*.webp" \
	--include="*.jpg" \
	--include="*.png" \
	--exclude="*" \
	mount/benev-storage/assets \
	x

echo "download process glbs"
npx glbx mount/benev-storage/assets x/assets

echo "assert remote x directory"
mkdir -p mount/benev-storage/x

echo "wipe remote x/assets"
rm -rfv mount/benev-storage/x/assets

echo "upload processed assets back to storage"
rsync -vham --progress x/assets mount/benev-storage/x

